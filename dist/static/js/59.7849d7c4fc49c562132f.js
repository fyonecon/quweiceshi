webpackJsonp([59],{"4Kxj":function(e,t){},uNuj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("y+mr");var o=n("3JdW"),a=n.n(o),i=n("Xxa5"),s=n.n(i),r=n("//Fk"),c=n.n(r),l=(n("34+y"),n("X+yh")),u=n.n(l),p=n("exGp"),m=n.n(p),d=n("pjeT"),w=n("mS0+"),f=n("psC7"),v=n("0oWP"),h=n("KvKp"),x=n("JAv/"),g=n("fxnj"),_=n.n(g),b="http://ywfbt.mukzz.pw/files/cover.jpg",k={name:"dwxlr",data:function(){return function(){var e=run_only_openid(window.location.href);console.log("url_openid="+e);var t=getCookie("openid");if(void 0!==e)if(""!=t){var n="http://qwapi_ywfbt.mukzz.pw/public/?s=/api/wxweb/user_info/openid/"+e;!function(e){new c.a(function(t,n){var o=new XMLHttpRequest;o.open("GET",e,!0),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){var e=JSON.parse(o.responseText);console.log(e),console.log(e.headimgurl),b=e.headimgurl,setCookie("head_img",b,1),t(e)}},o.send()})}(n),console.log("头像："+b)}else setCookie("openid",e,1),window.location.reload();else setCookie("head_img",b,1),wxok()}(),{step:1,nickname:"",sex:"",options:{showRadio:!0,showInput:!0},result:"",count:"",show:!1}},beforeRouteEnter:function(e,t,n){n(function(t){Object(x.a)(1).then(function(t){Object(h.a)(e)})})},mounted:function(){this.$nextTick(function(){window.scrollTo(0,0)})},methods:{close:function(){this.show=!1},toResult:function(){var e=this;return m()(s.a.mark(function t(){var n,o,a,i,r,l,p,m,d,w,f;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.nickname.trim()){t.next=3;break}return u()("请输入姓名"),t.abrupt("return");case 3:if(e.sex){t.next=6;break}return u()("请选择性别"),t.abrupt("return");case 6:return u()("加载中.."),n=e,o="male"===e.sex?"http://quweifiles.mukzz.pw/web-project/dwxlr/xy/xy"+Math.round(8*Math.random())+".jpg":"http://quweifiles.mukzz.pw/web-project/dwxlr/xx/xx"+Math.round(11*Math.random())+".jpg",a="http://qwapi_ywfbt.mukzz.pw/public/?s=/api/jump/jp",console.log(o),i=window.location.href,r=run_only(i),a=a+"/p/"+r,console.log(a),l=get_user_ip(),console.log(l),a=a+"/ip/"+l,console.log(a),t.next=21,Object(h.b)(a);case 21:p=t.sent,m=document.createElement("canvas"),d=m.getContext("2d"),w=0,f=0,new c.a(function(e,t){var n=new Image;n.crossOrigin="anonymous",n.src=o,n.onload=function(){m.width=n.width,m.height=n.height,w=n.width,f=n.height,d.drawImage(n,0,0,n.width,n.height),e()}}).then(function(){return new c.a(function(t,n){d.font="60px 微软雅黑",d.fillStyle="#fff",d.textAlign="left",d.fillText(e.nickname.trim(),180,115),t()})}).then(function(){return new c.a(function(e,t){var n=w-135,o=f-135,a=new Image;a.crossOrigin="anonymous",a.src=p,a.onload=function(){d.drawImage(a,n,o,135,135),e()}})}).then(function(){return new c.a(function(e,t){e()})}).then(function(){return new c.a(function(t,n){var o=new Image;o.crossOrigin="anonymous",o.src=getCookie("head_img"),console.log(o.src),o.onload=function(){var n=w/2,a=f/2+115-15;"male"===e.sex?(d.beginPath(),d.arc(n+5,a,115,0,2*Math.PI),d.clip(),d.drawImage(o,n-115+5,a-115,230,230)):(d.beginPath(),d.arc(n+5,a+1,115,0,2*Math.PI),d.clip(),d.drawImage(o,n-115+5,a-115+1,230,230)),t()}})}).then(function(){n.result=m.toDataURL("image/jpeg"),window.scrollTo(0,0),run_btn_cal(),Object(h.e)()?e.show=!0:_.a.previewImage({current:n.result,urls:[n.result]})});case 27:case"end":return t.stop()}},t,e)}))()}},components:{List:d.a,"mt-button":a.a,scriptRender:v.a,FixedBottom:w.a,preview:f.a}};var y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"web-index"},[n("div",{staticClass:"title"},[e._v("\n    你是什么动物系恋人？\n  ")]),e._v(" "),n("div",{staticClass:"container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step===1"}],staticClass:"p1"},[n("img",{staticClass:"cover-img",attrs:{src:"http://quweifiles.mukzz.pw/web-project/dwxlr/cover.jpg",alt:""}}),e._v(" "),e._m(0),e._v(" "),e.options.showInput?n("input",{directives:[{name:"model",rawName:"v-model",value:e.nickname,expression:"nickname"}],staticClass:"input",attrs:{type:"text",maxlength:"4",placeholder:"请输入姓名"},domProps:{value:e.nickname},on:{input:function(t){t.target.composing||(e.nickname=t.target.value)}}}):e._e(),e._v(" "),e.options.showRadio?n("div",{staticClass:"radio-box"},[n("label",{attrs:{for:"man"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.sex,expression:"sex"}],attrs:{type:"radio",id:"man",name:"sex",value:"male"},domProps:{checked:e._q(e.sex,"male")},on:{change:function(t){e.sex="male"}}}),e._v(" 我是男生\n        ")]),e._v(" "),n("label",{attrs:{for:"woman"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.sex,expression:"sex"}],attrs:{type:"radio",id:"woman",name:"sex",value:"female"},domProps:{checked:e._q(e.sex,"female")},on:{change:function(t){e.sex="female"}}}),e._v(" 我是女生\n        ")])]):e._e(),e._v(" "),n("mt-button",{staticClass:"btn-submit btn-ok",attrs:{type:"danger",size:"large"},on:{click:e.toResult}},[e._v("确 定")])],1)]),e._v(" "),n("list"),e._v(" "),n("div",{staticClass:"btn-box"},[n("mt-button",{staticClass:"scale",attrs:{type:"primary",size:"large"},on:{click:function(t){e.$router.push("/")}}},[e._v("更多测试 "),n("i",{staticClass:"iconfont icon-next"})])],1),e._v(" "),n("fixed-bottom"),e._v(" "),n("preview",{attrs:{pic:e.result,show:e.show},on:{close:e.close}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"small-title"},[this._v("你是什么动物系恋人？")]),this._v(" "),t("div",{staticClass:"small-title-txt"},[this._v("在甜蜜恋爱中的你身上拥有的一些特质，和什么动物最为相似呢？快看看你的结果吧！")])])}]};var j=n("VU/8")(k,y,!1,function(e){n("4Kxj")},"data-v-137507c8",null);t.default=j.exports}});